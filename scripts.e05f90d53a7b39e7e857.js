!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var t=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.header=document.createElement("header")}var n,a;return n=t,(a=[{key:"render",value:function(){return this.header.classList.add("header","block-shadowed"),this.header.innerHTML='\n        <div class="wrapper header__wrapper">\n             <div class="header__logo">\n                 <div class="logo">\n                     <h1 class="logo__title"><span>Virtual</span> keyboard</h1>\n                     <h4 class="logo__subtitle"><span>OC</span> Windows</h4>\n                 </div>\n             </div>\n         </div>',this.header}}])&&e(n.prototype,a),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var i=function(){function e(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";n(this,e),this.value=t,this.data=a,this.modification=i}var t,i;return t=e,(i=[{key:"render",value:function(){var e=document.createElement("div");return this.modification&&e.classList.add(this.modification),e.classList.add("key"),e.setAttribute("data-key",this.data),e.innerHTML="".concat(this.value),e}}])&&a(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keysData=["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace","Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","Delete","CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter","ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ArrowUp","ShiftRight","ControlLeft","MetaLeft","AltLeft","Space","AltRight","ArrowLeft","ArrowDown","ArrowRight","ControlRight"],this.keysEn=["`","1","2","3","4","5","6","7","8","9","0","-","=","← ","Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","Del","CapsLock","a","s","d","f","g","h","j","k","l",";","'","Enter","Shift","z","x","c","v","b","n","m",",",".","/","▲","Shift","Ctrl","Win","Alt","Space","Alt","◄","▼","►","Ctrl"],this.keysRu=["ё","1","2","3","4","5","6","7","8","9","0","-","=","← ","Tab","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","\\","Del","CapsLock","ф","ы","в","а","п","р","о","л","д","ж","э","Enter","Shift","я","ч","с","м","и","т","ь","б","ю",".","▲","Shift","Ctrl","Win","Alt","Space","Alt","◄","▼","►","Ctrl"],this.keysShift=["~","!","@","#","$","%","^","&","*","(",")","_","+","← ","Tab","Q","W","E","R","T","Y","U","I","O","P","{","}","|","Del","CapsLock","A","S","D","F","G","H","J","K","L",":",'"',"Enter","Shift","Z","X","C","V","B","N","M","<",">","?","▲","Shift","Ctrl","Win","Alt","Space","Alt","◄","▼","►","Ctrl"],this.keysShiftRu=["Ё","!",'"',"№",";","%",":","?","*","(",")","_","+","← ","Tab","Й","Ц","У","К","Е","Н","Г","Ш","Щ","З","Х","Ъ","/","Del","CapsLock","Ф","Ы","В","А","П","Р","О","Л","Д","Ж","Э","Enter","Shift","Я","Ч","С","М","И","Т","Ь","Б","Ю",",","▲","Shift","Ctrl","Win","Alt","Space","Alt","◄","▼","►","Ctrl"],this.lang=this.keysEn,this.langShift=this.keysShift}var t,n,a;return t=e,a=[{key:"createKey",value:function(e,t){var n="";return("← "===e||e.length>4)&&(n="key-special"),"Space"===e&&(n="key-unique"),new i(e,t,n).render()}}],(n=[{key:"localStorageCheck",value:function(e){if("ru"===e){var t=[this.keysRu,this.keysShiftRu];this.lang=t[0],this.langShift=t[1]}if("en"===e){var n=[this.keysEn,this.keysShift];this.lang=n[0],this.langShift=n[1]}localStorage.setItem("lang",e)}},{key:"languageSelection",value:function(e){var t=this;e.altKey&&e.ctrlKey&&("ru"===localStorage.getItem("lang")?this.localStorageCheck("en"):this.localStorageCheck("ru"),document.querySelectorAll(".key").forEach((function(e,n){var a=e,i=[t.lang[n],t.langShift[n]];a.innerHTML=i[0],a.dataset.shift=i[1]})))}},{key:"render",value:function(){var t=this,n=document.createElement("div");return n.classList.add("keyboard__container"),document.documentElement.addEventListener("keydown",this.languageSelection.bind(this)),this.localStorageCheck(localStorage.getItem("lang")),this.lang.forEach((function(a,i){return n.append(e.createKey(a,t.keysData[i],t.langShift[i]))})),n}}])&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.main=document.createElement("main"),this.arrays=new s,this.keyboard=(new s).render(),this.textarea=document.createElement("textarea"),this.note=document.createElement("div"),this.keys=this.keyboard.querySelectorAll(".key"),this.shift=null,this.caps=null}var t,n,a;return t=e,a=[{key:"getLengthRows",value:function(e,t){return e.reduce((function(e,n){if(n.length>t)for(var a=0;a<n.length;a+=t)e.push(n.slice(a,a+t-1));else e.push(n);return e}),[])}}],(n=[{key:"changeCase",value:function(e){"Low"===e&&this.keys.forEach((function(e){var t=e;/[^A-ZА-ЯЁ]/.test(t.innerHTML)||(t.innerHTML=t.innerHTML.toLowerCase())})),"Up"===e&&this.keys.forEach((function(e){var t=e;/[^a-zа-яё]/.test(t.innerHTML)||(t.innerHTML=t.innerHTML.toUpperCase())}))}},{key:"deleteСharactersAfter",value:function(e,t){e===t?this.textarea.setRangeText("",e,e+1,"end"):this.textarea.setRangeText("",e,t,"end")}},{key:"deleteСharactersBefore",value:function(e,t){0===e&&0===t||(e===t?this.textarea.setRangeText("",e-1,e,"end"):this.textarea.setRangeText("",e,t,"end"))}},{key:"eventDownHandler",value:function(t){var n=this;if(t.target.closest(".key")){this.textarea.focus();var a=this.textarea,i=a.selectionStart,r=a.selectionEnd,s=a.value.slice(0,i),o=a.value.slice(i),c=t.target.innerHTML;if(t.target.classList.add("active"),"← "===c&&this.deleteСharactersBefore(i,r),"Del"===c&&this.deleteСharactersAfter(i,r),"Tab"===c&&(a.value="".concat(s,"\t").concat(o),a.setSelectionRange(i+1,i+1)),"Shift"===c){if(this.keyboard.closest(".Shift"))return;this.arrays.localStorageCheck(localStorage.getItem("lang")),this.keys.forEach((function(e,t){e.innerHTML=n.arrays.langShift[t]})),this.keyboard.closest(".CapsLock")&&this.changeCase("Low"),this.keyboard.classList.add("Shift")}if("CapsLock"===c){if(this.caps)return;if(this.caps=!0,this.changeCase("Up"),document.querySelector('[data-key="CapsLock"]').classList.add("active"),this.keyboard.classList.toggle("CapsLock"),this.keyboard.closest(".Shift")&&this.changeCase("Low"),this.keyboard.closest(".CapsLock"))return;this.changeCase("Low")}if("Enter"===c&&(a.value="".concat(s,"\n").concat(o),a.setSelectionRange(i+1,i+1)),"Space"===c&&(a.value="".concat(s," ").concat(o),a.setSelectionRange(i+1,i+1)),"►"===c&&a.setSelectionRange(i+1,i+1),"◄"===c&&i>0&&a.setSelectionRange(i-1,i-1),"▲"===c){var l=0,h=Math.round((a.clientWidth-40)/8.783),u=a.value.slice(0,a.selectionStart).split("\n");if(1===(u=e.getLengthRows(u,h)).length&&u[0].length===h&&(u.push(""),l=1),u.length<2)return;var d=u[u.length-1].length,f=u[u.length-2].length;a.selectionStart=d<f?i-f-1+l:i-d-1+l,a.selectionEnd=a.selectionStart}if("▼"===c){var y=Math.round((a.clientWidth-40)/8.783),g=a.value.slice(0,a.selectionStart).split("\n"),p=(g=e.getLengthRows(g,y))[g.length-1].length,v=0;if((g=a.value.slice(a.selectionStart,a.value.length).split("\n"))[0].length>y-p){var k=g[0].slice(0,y-p);g[0]=g[0].slice(y-p,g[0].length),g.unshift(k),v=-1}if((g=e.getLengthRows(g,y)).length<2)return;var b=g[0].length,S=g[1].length;a.selectionStart=p>S?a.selectionStart+(S+b)+1+v:a.selectionStart+(b+p)+1+v,a.selectionEnd=a.selectionStart}["▲","▼","◄","►"].some((function(e){return e===c}))||c.length>1||(a.value="".concat(s).concat(c).concat(o),a.setSelectionRange(i+1,i+1))}}},{key:"eventUpHandler",value:function(e){var t=this,n=e.target.innerHTML;document.querySelectorAll(".key").forEach((function(e){return e.classList.remove("active")})),"Shift"===n&&(this.keys.forEach((function(e,n){e.innerHTML=t.arrays.lang[n]})),this.keyboard.classList.remove("Shift")),"CapsLock"===n&&(this.caps=!1),this.keyboard.closest(".Shift")&&this.changeCase("Up"),this.keyboard.closest(".CapsLock")&&(this.changeCase("Up"),document.querySelector('[data-key="CapsLock"]').classList.add("active")),this.keyboard.closest(".Shift")&&this.keyboard.closest(".CapsLock")&&this.changeCase("Low")}},{key:"keyHandler",value:function(e,t){e.preventDefault(),"Shift"===e.key&&(this.shift=e.code),document.querySelectorAll(".key").forEach((function(n){if(n.dataset.key===e.code){var a=new Event(t,{bubbles:!0});n.dispatchEvent(a)}}))}},{key:"init",value:function(){var e=this;this.keyboard.addEventListener("mousedown",this.eventDownHandler.bind(this)),this.keyboard.addEventListener("mouseup",this.eventUpHandler.bind(this)),this.keyboard.addEventListener("click",(function(){return e.textarea.focus()})),document.documentElement.addEventListener("keydown",(function(t){return e.keyHandler(t,"mousedown")})),document.documentElement.addEventListener("keyup",(function(t){e.keyHandler(t,"mouseup"),t.shiftKey&&document.querySelector('[data-key="'.concat(e.shift,'"]')).classList.add("active")}))}},{key:"render",value:function(){var e=document.createElement("section"),t=document.createElement("div");return e.classList.add("keyboard"),t.classList.add("wrapper","keyboard__wrapper"),this.textarea.classList.add("keyboard__textarea"),this.note.classList.add("keyboard__note"),this.note.innerHTML="NOTE: Press <span>ctrl + alt</span> to change language",t.append(this.textarea,this.keyboard,this.note),e.append(t),this.main.append(e),this.init(),this.main}}])&&o(t.prototype,n),a&&o(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.footer=document.createElement("footer")}var t,n;return t=e,(n=[{key:"render",value:function(){return this.footer.classList.add("footer","block-shadowed"),this.footer.innerHTML='\n        <div class="wrapper">\n            <div class="footer__content layout-2-column">\n                <div class="footer__copy">\n                <span>©diXrom</span><span>2022</span><a href="https://github.com/diXrom" target="_blank">Github</a>\n                </div>\n                <div class="footer__rss">\n                <a href="https://rs.school/js-stage0/" target="_blank">Rolling Scopes School</a>\n                </div>\n            </div>\n        </div>',this.footer}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),u=(new t).render(),d=(new c).render(),f=(new h).render();document.body.append(u,d,f)}();
//# sourceMappingURL=scripts.e05f90d53a7b39e7e857.js.map